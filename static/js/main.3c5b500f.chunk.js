(this["webpackJsonpweather-maps"]=this["webpackJsonpweather-maps"]||[]).push([[0],{11:function(e,t,a){e.exports={container:"city_details_container__1m387",preciseName:"city_details_preciseName__KwFmC",information:"city_details_information__4tvL1",expanded:"city_details_expanded__2O-WA",iconUp:"city_details_iconUp__1cSnZ",temp:"city_details_temp__axkot",action:"city_details_action__1Hkv-",cityTitle:"city_details_cityTitle__2-t-m",cityDetails:"city_details_cityDetails__3yAEx",cityData:"city_details_cityData__CV0o0",climateImg:"city_details_climateImg__3oAcm",day:"city_details_day__tR48s",night:"city_details_night__2xWXG",desktopTitle:"city_details_desktopTitle__1zMTs",remove:"city_details_remove__ZxU9h",desktopExpanded:"city_details_desktopExpanded__tGsds"}},21:function(e,t,a){e.exports={loginBody:"login_page_loginBody__330DG",last:"login_page_last__3toCa",indication:"login_page_indication__3MdJx",title:"login_page_title__1F3py",desktopAside:"login_page_desktopAside__3wbBg",error:"login_page_error__2DvPM",action:"login_page_action__b42xw",desktopTitle:"login_page_desktopTitle__1PgcQ"}},22:function(e,t,a){e.exports={last:"register_last__360yi",registerBody:"register_registerBody__4eSLN",title:"register_title__1zLO4",desktopAside:"register_desktopAside__2iQ_R",indication:"register_indication__1DyDu",error:"register_error__2l9KN",action:"register_action__rR48n",desktopTitle:"register_desktopTitle__2zVI-"}},23:function(e,t,a){e.exports={container:"favorites_bar_container__2G0E0",expanded:"favorites_bar_expanded__3R8no",toggle:"favorites_bar_toggle__3ueY-",bar:"favorites_bar_bar__UZdeO",signOut:"favorites_bar_signOut__rZ-WN",dropdown:"favorites_bar_dropdown__U9hDy",scroll:"favorites_bar_scroll__3peHf",dropInfo:"favorites_bar_dropInfo__3ZFBm"}},30:function(e,t,a){e.exports={map:"map_page_map__3DsYW",container:"map_page_container__2xF8o",barSpace:"map_page_barSpace__3wQap",desktopAside:"map_page_desktopAside__3OMeO"}},34:function(e,t,a){e.exports={selection:"markers_selection__hhEzz"}},39:function(e,t,a){e.exports={field:"form_styles_field__3HBxi"}},40:function(e,t,a){e.exports={background:"background_background__2q-rT"}},41:function(e,t,a){e.exports={container:"text_button_container__29phu"}},52:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(15),i=a.n(s),r=(a(52),a(44)),o=a(7),l=a(8),d=a(27),u=a(9),p=a(12),j=a(39),b=a.n(j),_=a(2),O=function(e){var t=e.values;return Object(_.jsx)("div",{children:t.map((function(e,t){return Object(_.jsx)(m,{v:e,index:t},e.label+t)}))})},m=function(e){var t=e.v,a=(e.index,Object(n.useRef)(null));return Object(_.jsxs)("div",{className:b.a.field,children:[Object(_.jsx)("label",{children:t.label}),Object(_.jsx)("input",Object(u.a)(Object(u.a)({},t.inputProps),{},{ref:a}))]})},h=a(40),f=a.n(h),g=function(e){var t=e.children;return Object(_.jsx)("div",{className:f.a.background,children:t})},v=a(41),x=a.n(v),y=function(e){var t=e.onClick,a=e.children;return Object(_.jsx)("div",{className:x.a.container,onClick:t,children:Object(_.jsx)("span",{children:a})})},N="AUTH_CHANGED",k="LOADED_PLACES",w="LOADING_DATA",C="LOADED_DATA",A="SET_POSITION",I=a(42),T=(a(57),a(64),{"auth/invalid-email":"El correo ingresado no es v\xe1lido","auth/user-disabled":"El usuario no est\xe1 disponible","auth/user-not-found":"El usuario no fu\xe9 encontrado","auth/wrong-password":"Las credenciales no son correctas","auth/email-already-in-use":"Este correo ya est\xe1 en uso","auth/operation-not-allowed":"Acc\xedon negada por el servidor","auth/weak-password":"La contrase\xf1a es muy d\xe9bil, escriba una com m\xe1s carateres"}),D=function(e){return T[e]},S=I.a.initializeApp({apiKey:"AIzaSyB_y3btlp6QFfv3w3_O8ZZoQSuF5ZTJtdM",authDomain:"weather-maps-2e8d5.firebaseapp.com",projectId:"weather-maps-2e8d5",storageBucket:"weather-maps-2e8d5.appspot.com",messagingSenderId:"465382766108",appId:"1:465382766108:web:68d3cd5b6b4230558f11d9"}),E=function(e){return/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/.test(e)},P=a(21),L=a.n(P);var F=function(){var e=Object(o.g)(),t=Object(l.c)((function(e){return e.isLoading})),a=Object(l.b)(),c=Object(n.useState)({email:"",password:""}),s=Object(p.a)(c,2),i=s[0],r=s[1],j=Object(n.useState)([]),b=Object(p.a)(j,2),m=b[0],h=b[1],f=function(e,t){r(Object(u.a)(Object(u.a)({},i),{},Object(d.a)({},e,t)))},v=[{label:"Correo electr\xf3nico: ",inputProps:{placeholder:"test@email.com",value:i.email,onChange:function(e){f("email",e.target.value)}}},{label:"Contrase\xf1a:",inputProps:{type:"password",value:i.password,onChange:function(e){f("password",e.target.value)}}}];return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(g,{children:Object(_.jsxs)("div",{className:L.a.loginBody,children:[Object(_.jsx)("div",{className:L.a.desktopTitle,children:Object(_.jsx)("h1",{className:L.a.title,children:"Weather Maps"})}),Object(_.jsxs)("div",{className:L.a.desktopAside,children:[Object(_.jsx)("h5",{className:L.a.indication,children:"Inicia sesi\xf3n para ver tus ciudades"}),Object(_.jsx)(O,{values:v}),Object(_.jsx)("div",{className:L.a.error,children:m.map((function(e,t){return Object(_.jsx)("p",{children:e},t)}))}),Object(_.jsxs)("button",{onClick:function(){var e=i.email,t=i.password,n=[];e&&""!==e&&t&&""!==t?(E(e)||n.push("El email no es v\xe1lido"),n.length>0?h(n):(a({type:w}),S.auth().signInWithEmailAndPassword(e,t).then((function(e){a({type:C})})).catch((function(e){a({type:C}),h([D(e.code)])})))):h(n=["Favor de llenar todos los campos"])},disabled:t,className:"button "+L.a.action,children:[t&&Object(_.jsx)("i",{className:"fas fa-snowflake spinning"}),Object(_.jsx)("span",{children:"Ingresar"})]}),Object(_.jsx)("div",{className:L.a.last,children:Object(_.jsx)(y,{onClick:function(){e.push("/register")},children:"Registrarse"})})]})]})})})},z=a(19),R=a.n(z),B=a(26),G=a(22),U=a.n(G);var Z=function(){var e=Object(o.g)(),t=Object(l.c)((function(e){return e.isLoading})),a=Object(l.b)(),c=Object(n.useState)([]),s=Object(p.a)(c,2),i=s[0],r=s[1],j=Object(n.useState)({email:"",password:"",repeatPassword:""}),b=Object(p.a)(j,2),m=b[0],h=b[1],f=function(e,t){h(Object(u.a)(Object(u.a)({},m),{},Object(d.a)({},e,t)))},v=function(){var e=Object(B.a)(R.a.mark((function e(){var t,n,c,s,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.email,n=m.password,c=m.repeatPassword,s=[],t&&""!==t&&n&&""!==n&&c&&""!==c){e.next=6;break}return r(s=["Favor de llenar todos los campos"]),e.abrupt("return");case 6:if(n.length<6&&s.push("La contrase\xf1a es demasiado corta"),E(t)||s.push("El email no es v\xe1lido"),n!==c&&s.push("Las contrase\xf1as no coinciden"),!(s.length>0)){e.next=12;break}return r(s),e.abrupt("return");case 12:return a({type:w}),e.prev=13,e.next=16,S.auth().createUserWithEmailAndPassword(t,n);case 16:i=e.sent,a({type:C}),console.log(i),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(13),a({type:C}),r([D(e.t0.code)]),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[13,21]])})));return function(){return e.apply(this,arguments)}}(),x=[{label:"Correo electr\xf3nico:",inputProps:{placeholder:"myEmail@email.com",value:m.email,onChange:function(e){f("email",e.target.value)}}},{label:"Contrase\xf1a:",inputProps:{type:"password",value:m.password,onChange:function(e){f("password",e.target.value)}}},{label:"Repetir Contrase\xf1a:",inputProps:{type:"password",value:m.repeatPassword,onChange:function(e){f("repeatPassword",e.target.value)}}}];return Object(_.jsx)(g,{children:Object(_.jsxs)("div",{className:U.a.registerBody,children:[Object(_.jsx)("div",{className:U.a.desktopTitle,children:Object(_.jsx)("h1",{className:U.a.title,children:"Weather Maps"})}),Object(_.jsxs)("div",{className:U.a.desktopAside,children:[Object(_.jsx)("h4",{className:U.a.indication,children:"Registrate"}),Object(_.jsx)(O,{values:x}),Object(_.jsx)("div",{className:U.a.error,children:i.map((function(e,t){return Object(_.jsx)("p",{children:e},t)}))}),Object(_.jsxs)("button",{onClick:v,className:"button "+U.a.action,children:[t&&Object(_.jsx)("i",{className:"fas fa-snowflake spinning"}),Object(_.jsx)("span",{children:"Registrarse"})]}),Object(_.jsx)("div",{className:U.a.last,children:Object(_.jsx)(y,{onClick:function(){e.replace("/login")},children:"Iniciar Sesi\xf3n"})})]})]})})},M=a(45),W=a(30),Q=a.n(W),H=a(23),J=a.n(H);var K=function(e){var t=e.onLocationClick,a=Object(n.useState)(!1),c=Object(p.a)(a,2),s=c[0],i=c[1],r=Object(l.c)((function(e){return e.places})),o=Object(l.b)();return Object(_.jsxs)("div",{className:J.a.container+" "+(s?J.a.expanded:""),children:[Object(_.jsxs)("div",{className:J.a.bar,children:[Object(_.jsx)("div",{className:J.a.toggle,onClick:function(){return i(!s)},children:Object(_.jsxs)("span",{children:[Object(_.jsx)("i",{className:"fas fa-chevron-right"}),Object(_.jsx)("span",{children:"Favoritos"})]})}),Object(_.jsxs)("div",{className:J.a.signOut,onClick:function(){S.auth().signOut()},children:["Cerrar Sesi\xf3n",Object(_.jsx)("i",{className:"fas fa-sign-out-alt"})]})]}),Object(_.jsx)("div",{className:J.a.scroll,children:Object(_.jsx)("ul",{className:J.a.dropdown,children:r&&r.length>0?r.map((function(e,a){return Object(_.jsx)("li",{onClick:function(){return a=e.coords,o({type:A,payload:a}),void t(a);var a},children:Object(_.jsxs)("div",{children:[e.mainName,Object(_.jsx)("span",{children:e.secondName})]})},e.mainName+a)})):Object(_.jsx)("p",{className:J.a.dropInfo,children:"No tienes lugares guardados"})})})]})},X=a(46),V=function(e){return 9*e/5-459.67},Y=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},$=a(11),q=a.n($);var ee=function(e){var t,a,c=e.weatherData,s=e.locationData,i=Object(l.c)((function(e){return e.selectedPosition})),r=Object(l.c)((function(e){return e.places})),o=Object(l.c)((function(e){return e.loggedInID})),d=Object(l.c)((function(e){return e.isLoading})),u=Object(n.useState)(!1),j=Object(p.a)(u,2),b=j[0],O=j[1],m=function(){return!(!r||!c)&&r.some((function(e){return e.mainName===c.name&&e.secondName===(s?s.formatted_address:" ")}))};return Object(_.jsx)("div",{className:q.a.container+" "+(d||!c||b?q.a.expanded:""),children:d?Object(_.jsxs)("div",{className:q.a.information,children:[Object(_.jsx)("i",{className:"fas fa-snowflake spinning"})," Cargando"]}):c?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:q.a.iconUp,onClick:function(){return O(!b)},children:[Object(_.jsx)("i",{className:"fas fa-chevron-up"}),Object(_.jsx)("h3",{className:q.a.cityTitle,children:null===c||void 0===c?void 0:c.name}),Object(_.jsx)("p",{className:q.a.preciseName,children:null===s||void 0===s?void 0:s.formatted_address})]}),Object(_.jsxs)("div",{className:q.a.desktopExpanded,children:[Object(_.jsx)("h3",{className:q.a.desktopTitle,children:null===c||void 0===c?void 0:c.name}),Object(_.jsx)("p",{className:q.a.preciseName+" "+q.a.desktopTitle,children:null===s||void 0===s?void 0:s.formatted_address}),Object(_.jsxs)("div",{className:q.a.cityDetails,children:[Object(_.jsxs)("div",{className:q.a.cityData,children:[Object(_.jsx)("div",{children:(a=c.weather[0].description,a.split(" ").map((function(e){return Y(e)})).join(" "))}),Object(_.jsxs)("div",{className:q.a.temp,children:[Object(_.jsx)("div",{children:(t=c.main.temp,t-273.15).toFixed(1)+" \xb0C "}),Object(_.jsx)("div",{children:V(c.main.temp).toFixed(1)+" \xb0F"})]}),Object(_.jsxs)("div",{children:[c.main.humidity," mm"]})]}),Object(_.jsx)("div",{className:q.a.climateImg+" "+("d"===c.weather[0].icon.charAt(2)?q.a.day:q.a.night),children:Object(_.jsx)("img",{alt:"weather-icon",src:"https://openweathermap.org/img/wn/".concat(c.weather[0].icon,"@4x.png")})})]}),Object(_.jsx)("button",{onClick:m()?function(){var e=r.filter((function(e){return e.mainName!==c.name&&e.secondName!==(s?s.formatted_address:" ")}));S.firestore().collection("users").doc(o).set({places:e})}:function(){var e={mainName:c.name,secondName:s?s.formatted_address:" ",coords:i},t=S.firestore().collection("users").doc(o);r?t.set({places:[].concat(Object(X.a)(r),[e])}):t.set({places:[e]})},className:"button "+q.a.action+" "+(m()?q.a.remove:""),children:m()?"Quitar":"Guardar"})]})]}):Object(_.jsx)("div",{className:q.a.information,children:"Seleccione un lugar"})})},te=a(34),ae=a.n(te),ne=function(e){return Object(_.jsx)("div",{className:ae.a.selection,onClick:e.onClick,children:Object(_.jsx)("img",{src:"./assets/img/marker2.svg",alt:"Current location"})})},ce=function(e){return Object(_.jsx)("div",{className:ae.a.selection,onClick:e.onClick,children:Object(_.jsx)("img",{src:"./assets/img/marker.svg",alt:"Current location"})})},se=function(e){return Object(_.jsx)("div",{className:ae.a.selection,onClick:e.onClick,children:Object(_.jsx)("img",{src:"./assets/img/marker1.svg",alt:"Current location"})})};var ie=function(){var e=Object(l.c)((function(e){return e.loggedInID})),t=Object(l.c)((function(e){return e.places})),a=Object(l.b)(),c=Object(l.c)((function(e){return e.selectedPosition})),s=Object(n.useState)(),i=Object(p.a)(s,2),r=i[0],o=i[1],d=Object(n.useState)(!1),u=Object(p.a)(d,2),j=u[0],b=u[1],O=Object(n.useState)(void 0),m=Object(p.a)(O,2),h=m[0],f=m[1],g=Object(n.useState)(),v=Object(p.a)(g,2),x=v[0],y=v[1],N=Object(n.useState)(),I=Object(p.a)(N,2),T=I[0],D=I[1],E=function(){var e=Object(B.a)(R.a.mark((function e(t,a){var n,c,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(t,a);case 3:n=e.sent,c=n.values,"OK"===n.status&&c&&(s=c.find((function(e){return e.types.includes("locality")})),D(s)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Geocoding failed"),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),P=function(e,t){var a={lat:e,lng:t};return new Promise((function(e,t){h&&j?(new h.Geocoder).geocode({location:a},(function(t,a){return e({values:t,status:a})})):t("Failed to Geocode, api not loaded")}))},L=function(){var e=Object(B.a)(R.a.mark((function e(t,a){var n,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.openweathermap.org/data/2.5/weather?lat=".concat(t,"&lon=").concat(a,"&appid=").concat("f18c89d791fbe09f2153b491309249d3","&lang=es"),e.prev=1,e.next=4,fetch(n);case 4:return e.next=6,e.sent.json();case 6:c=e.sent,y(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}(),F=function(){var e=Object(B.a)(R.a.mark((function e(t){var n,c,s,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lat,c=t.lng,a({type:A,payload:{lat:n,lng:c}}),a({type:w}),s=E(n,c),i=L(n,c),e.prev=5,e.next=8,Promise.all([s,i]);case 8:a({type:C}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),a({type:C}),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(B.a)(R.a.mark((function e(t){var n,c,s,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lat,c=t.lng,a({type:w}),s=E(n,c),i=L(n,c),e.prev=4,e.next=7,Promise.all([s,i]);case 7:a({type:C}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),a({type:C}),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var t=S.firestore().collection("users").doc(e).onSnapshot((function(e){var t=e.data();a({type:k,payload:t&&t.places})}));return function(){t()}}),[e,a]),Object(_.jsxs)("div",{className:Q.a.container,children:[Object(_.jsx)("div",{className:Q.a.barSpace,children:Object(_.jsx)(K,{onLocationClick:z})}),Object(_.jsx)("div",{className:Q.a.map,children:Object(_.jsxs)(M.a,{bootstrapURLKeys:{key:"AIzaSyAlAfjkEyZc3T2vLRARL5f4QYJj3ZPai6Q",libraries:["places"]},center:c,defaultZoom:12,options:function(e){return{fullscreenControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},mapTypeControl:!0,mapTypeControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP}}},onClick:F,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){e.map;var t,n=e.maps;return t=n,b(!0),f(t),void navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};a({type:A,payload:t}),o(t)}))},children:[Object(_.jsx)(ne,{lat:c.lat,lng:c.lng}),r&&Object(_.jsx)(ce,{lat:null===r||void 0===r?void 0:r.lat,lng:null===r||void 0===r?void 0:r.lng,onClick:function(){return F({lat:null===r||void 0===r?void 0:r.lat,lng:null===r||void 0===r?void 0:r.lng})}}),t&&t.length>0&&t.map((function(e,t){return Object(_.jsx)(se,{lat:e.coords.lat,lng:e.coords.lng,onClick:function(){return F({lat:e.coords.lat,lng:e.coords.lng})}},e.mainName+t)}))]})}),Object(_.jsx)("div",{className:Q.a.desktopAside,children:Object(_.jsx)(ee,{weatherData:x,locationData:T})})]})};a(62);var re=function(){var e=Object(l.c)((function(e){return e.loggedInID})),t=Object(l.b)();return Object(n.useEffect)((function(){var e=S.auth().onAuthStateChanged((function(e){t(e?{type:N,payload:e.uid}:{type:N,payload:null})}));return function(){e()}})),Object(_.jsx)(r.a,{basename:"/",children:Object(_.jsx)("div",{className:"App",children:Object(_.jsxs)(o.d,{children:[Object(_.jsx)(o.b,{path:"/login",children:e?Object(_.jsx)(o.a,{to:"/map"}):Object(_.jsx)(F,{})}),Object(_.jsx)(o.b,{path:"/register",children:e?Object(_.jsx)(o.a,{to:"/map"}):Object(_.jsx)(Z,{})}),Object(_.jsx)(o.b,{path:"/map",children:e?Object(_.jsx)(ie,{}):Object(_.jsx)(o.a,{to:"/login"})}),Object(_.jsxs)(o.b,{path:"*",children:[e?Object(_.jsx)(o.a,{to:"/map"}):Object(_.jsx)(o.a,{to:"/login"}),Object(_.jsx)(o.a,{to:"/login"})]})]})})})},oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,65)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),s(e),i(e)}))},le=a(47),de={loggedInID:null,isLoading:!1,selectedPosition:{lat:18.9,lng:-99.2}},ue=Object(le.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;return t.type===w?Object(u.a)(Object(u.a)({},e),{},{isLoading:!0}):t.type===N?Object(u.a)(Object(u.a)({},e),{},{loggedInID:t.payload,isLoading:!1}):t.type===k?Object(u.a)(Object(u.a)({},e),{},{places:t.payload,isLoading:!1}):t.type===C?Object(u.a)(Object(u.a)({},e),{},{isLoading:!1}):t.type===A?Object(u.a)(Object(u.a)({},e),{},{selectedPosition:t.payload}):e}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(l.a,{store:ue,children:Object(_.jsx)(re,{})})}),document.getElementById("root")),oe()}},[[63,1,2]]]);
//# sourceMappingURL=main.3c5b500f.chunk.js.map